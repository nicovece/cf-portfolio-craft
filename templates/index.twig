{% extends '_layouts/base.twig' %}
{% import '_macros' as macros %}

{% block title %}
	{{ entry.title }} - {{ siteName }}
{% endblock %}

{% block content %}
	{# Intro Section #}
	<section class="section-intro section-max-width">
		{% include '_partials/intro-text' with {
			text: entry.introText
		} only %}
	</section>

	{# Projects Section #}
	<section class="section-wrapper">
		<h2 class="mb-8 text-2xl font-medium">Recent Projects</h2>

		{% set projects = craft.entries().section('projects').limit(6).orderBy('postDate DESC').all() %}

		{% if projects|length %}
			<div class="grid grid-cols-1 gap-8 md:grid-cols-2 lg:grid-cols-3">
				{% for project in projects %}
					{% include '_partials/entry/project-teaser' with {
						entry: project
					} %}
				{% endfor %}
			</div>
		{% else %}
			<p>
				No projects yet.
			</p>
		{% endif %}
	</section>

	{# About Box Section #}
	<section class="section-wrapper">
		<div class="flex flex-col items-center gap-8 rounded-lg bg-gray-100 p-8 md:flex-row">
			{% set aboutImage = entry.profileImage.one() %}
			{% if aboutImage %}
				<img
					src="{{ aboutImage.getUrl('w1200') }}"
					srcset="{{ macros.srcSet(aboutImage) }}"
					sizes="(min-width: 1024px) 25vw, 50vw"
					alt="{{ entry.calloutTitle }}"
					class="h-32 w-32 rounded-full object-cover"
					loading="lazy"
				/>
			{% endif %}

			<div class="flex-1">
				<h3 class="mb-2 text-xl font-medium">{{ entry.calloutTitle }}</h3>
				<div class="prose">
					{{ entry.calloutText }}
				</div>

				<div class="mt-4 flex gap-4">
					<a href="{{ url('about') }}" class="text-accent hover:underline">More about me</a>

					{% set resume = entry.resumeFile.one() %}
					{% if resume %}
						<a href="{{ resume.url }}" class="text-accent hover:underline" download>Download Resume</a>
					{% endif %}
				</div>
			</div>
		</div>
	</section>
{% endblock %}
